@if (viewModel(); as vm) {
  <ctui-toolbar title="Current meal">
    <button (click)="onClearCurrentMealClick()" mat-icon-button>
      <mat-icon>delete_sweep</mat-icon>
    </button>
  </ctui-toolbar>
  <div class="summary-container">
    @if (vm.showInsulinUnits) {
      <div class="insulin-units-summary-container">
        <div class="insulin-units-breakfast">
          <mat-icon>wb_twilight</mat-icon
          >{{ vm.insulinUnits.breakfast | number: '1.0-1' }} I.U.
        </div>
        <div class="insulin-units-lunch">
          <mat-icon>wb_sunny</mat-icon
          >{{ vm.insulinUnits.lunch | number: '1.0-1' }} I.U.
        </div>
        <div class="insulin-units-dinner">
          <mat-icon>nights_stay</mat-icon
          >{{ vm.insulinUnits.dinner | number: '1.0-1' }} I.U.
        </div>
      </div>
    }
    <span class="carbs-summary"
      >{{ vm.sumOfCurrentMealCarbs | number: '1.0-0' }}g</span
    >
  </div>
  @if (vm.mealEntries.length > 0) {
    <mat-nav-list>
      @for (mealEntry of vm.mealEntries; track mealEntry.productId) {
        <mat-list-item (click)="onMealEntryClick(mealEntry)">
          <h4 matListItemTitle>{{ mealEntry.name }}</h4>
          <p matListItemLine>
            <span>{{ mealEntry.amount }}g</span>
          </p>
        </mat-list-item>
      }
    </mat-nav-list>
  } @else {
    No current meal created yet. Add some products to fill your list!
  }

  <button
    (click)="onAddClick()"
    mat-fab
    color="primary"
    ctuiFixedPosition
    type="button"
    [disabled]="!vm.productsAvailable"
  >
    <mat-icon>add</mat-icon>
  </button>
}
